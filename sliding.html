<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>移动端手势操作滑块</title>
	<style type="text/css">
     *{margin: 0;padding: 0;list-style: none}
     .wrap{width: 80%;height: 50px;margin: 0 auto;border-bottom: 4px solid #333;}
     #block{display: inline-block;width: 20px;height: 50px;;background-color: #ccc;margin-top: 25px;}
	</style>
</head>
<body>
<div  class='wrap'>
	<span id='block'></span>
</div>	
</body>
<script type="text/javascript">
	// obj=document.getElementById("block");
	// obj.addEventListener('touchstart', starthalder);
	// obj.addEventListener('touchmove', movehalder);
    
 //    console.log(obj.offsetLeft);

	// function starthalder(evt){
	// 	// console.log(evt);
	// 	console.log(evt.targetTouches);
	// }

	// function movehalder(evt){
	// 	// console.log(evt);
	// 	console.log(evt.targetTouches);
	// }

	//构造函数
	function Slider(opts){
		//构造函数需要的参数
		this.block = opts.dom;
		//构造三步奏
		this.init();
		// this.renderDOM();
		this.bindDOM();
	}

	//第一步 -- 初始化
	Slider.prototype.init = function() {
		
		//获取目标元素距离左侧边界的距离
		this.left=this.block.offsetLeft;
		// console.log(this.left);

	};

    // 绑定事件
	Slider.prototype.bindDOM = function(){
	    var self=this;
	    var obj=self.block;

	    // 手指开始
		var starthalder=function(evt){
			// console.log(evt);
			// console.log(evt.targetTouches);
			self.start=evt.targetTouches[0].pageX;
			console.log(self.start);

			// 事件对象
			var target = evt.target;
			while(target.nodeName != 'SPAN' && target.nodeName != 'BODY'){
				target = target.parentNode;
			}
			self.target = target;
		}
        
        // 移动
		var movehalder=function(evt){
			evt.preventDefault();
			// console.log(evt);
			self.offset=evt.targetTouches[0].pageX-self.start;
			// console.log(move);
			obj.style.webkitTransform = 'translate3d('+ self.offset +'px, 0, 0)';
            self.endX=evt.targetTouches[0].pageX;

		}
		// 手指抬起
		var endhalder=function(evt){
			// obj.style.webkitTransform='translate('+evt.targetTouches[0].pageX-this.left+'px,0)';
			evt.preventDefault();
			// console.log(evt.targetTouches);
			obj.style.webkitTransform = 'translate3d('+ self.endX-self.offset +'px, 0, 0)';
		}

		obj.addEventListener('touchstart', starthalder);
	    obj.addEventListener('touchmove', movehalder);
	    obj.addEventListener('touchend', endhalder);
	}

	//初始化Slider 实例
	new Slider({
		dom : document.getElementById('block'),
	});
</script>
</html>